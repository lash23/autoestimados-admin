"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2119],{2119:(N,Z,r)=>{r.r(Z),r.d(Z,{EstimateDetailPageModule:()=>P});var u=r(6019),l=r(7816),i=r(1700),g=r(184),d=r(1855),h=r(1251),t=r(3245);let _=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-lightbox"]],inputs:{image:"image"},decls:2,vars:1,consts:[[1,"content"],[3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("src",o.image,t.LSH))},styles:["div.content[_ngcontent-%COMP%]{height:100%;display:flex;align-content:center;justify-content:center;align-items:center}"]}),n})();var p=r(3504);let f=(()=>{class n{constructor(e,o,a,c){this.toastController=e,this.estimationsService=o,this.fb=a,this.modalController=c}ngOnInit(){console.log("estimationId",this.estimationId),this.initBudgetForm()}createBudget(){this.estimationsService.createBudget(this.budgetForm.value,this.estimationId).subscribe(e=>{this.toasSuccess(),this.modalController.dismiss(e)},e=>{console.log(e),this.toasError()})}toasSuccess(){return(0,d.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Estimado creado con Exito!.",duration:2e3,position:"top",color:"primary"})).present()})}toasError(){return(0,d.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Hubo un error al crear el estimado!.",duration:2e3,position:"top",color:"danger"})).present()})}initBudgetForm(){this.budgetForm=this.fb.group({budget:["",l.kI.required],notes:[""]}),console.log("init",this.budgetForm)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.yF),t.Y36(p.Q),t.Y36(l.qu),t.Y36(i.IN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-estimate-modal"]],inputs:{estimationId:"estimationId"},decls:14,vars:2,consts:[[1,"estimate-form"],[3,"formGroup","ngSubmit"],["formControlName","budget","type","number"],["formControlName","notes","rows","6","cols","20"],["type","submit",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3"),t._uU(2,"Estimaci\xf3n para"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return o.createBudget()}),t.TgZ(4,"ion-item"),t.TgZ(5,"ion-label"),t._uU(6,"Presupuesto: $"),t.qZA(),t._UZ(7,"ion-input",2),t.qZA(),t.TgZ(8,"ion-item"),t.TgZ(9,"ion-label"),t._uU(10,"Agregar nota (opcional):"),t.qZA(),t._UZ(11,"ion-textarea",3),t.qZA(),t.TgZ(12,"ion-button",4),t._uU(13," Guardar "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",o.budgetForm),t.xp6(9),t.Q6J("disabled",o.budgetForm.invalid))},directives:[l._Y,l.JL,l.sg,i.Ie,i.Q$,i.pK,i.as,l.JJ,l.u,i.g2,i.j9,i.YG],styles:[".estimate-form[_ngcontent-%COMP%]{text-align:center;display:flex;align-content:center;flex-direction:column;justify-content:center;align-items:center;height:100%}.estimate-form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:20px 0}"]}),n})();function T(n,s){if(1&n&&(t.TgZ(0,"ion-card"),t.TgZ(1,"ion-card-content"),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"small"),t._uU(5," 2022 / Marzo / 15 "),t.qZA(),t.qZA(),t.qZA()),2&n){const e=s.$implicit;t.xp6(3),t.hij(" ",e," ")}}function v(n,s){1&n&&(t.TgZ(0,"ion-card",8),t.TgZ(1,"h1"),t._uU(2,"Aun no hay notas guardadas"),t.qZA(),t.qZA())}let A=(()=>{class n{constructor(e,o,a,c){this.toastController=e,this.estimationsService=o,this.fb=a,this.modalController=c}ngOnInit(){this.initNotesForm()}toasSuccess(){return(0,d.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Nota guardada con Exito!.",duration:2e3,position:"top",color:"primary"})).present()})}toasError(){return(0,d.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Hubo un error al guardar la nota!.",duration:2e3,position:"top",color:"danger"})).present()})}initNotesForm(){this.notesForm=this.fb.group({notes:["",l.kI.required]})}saveNote(){return this.estimationsService.saveNote(this.notesForm.value,this.estimationId).subscribe(e=>{this.toasSuccess(),this.modalController.dismiss(e)},e=>{console.log(e),this.toasError()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.yF),t.Y36(p.Q),t.Y36(l.qu),t.Y36(i.IN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-notes-modal"]],inputs:{notes:"notes",estimationId:"estimationId"},decls:12,vars:4,consts:[[1,"notes-modal-content"],[1,"notes-content"],[4,"ngFor","ngForOf"],["class","ion-text-center",4,"ngIf"],[3,"formGroup","ngSubmit"],["formControlName","notes","rows","6","cols","20"],[1,"ion-text-center","ion-margin"],["type","submit",1,"ion-margin-auto",3,"disabled"],[1,"ion-text-center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,T,6,1,"ion-card",2),t.YNc(3,v,3,0,"ion-card",3),t.qZA(),t.TgZ(4,"form",4),t.NdJ("ngSubmit",function(){return o.saveNote()}),t.TgZ(5,"ion-item"),t.TgZ(6,"ion-label"),t._uU(7,"Agregar nota:"),t.qZA(),t._UZ(8,"ion-textarea",5),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"ion-button",7),t._uU(11," Guardar nota "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngIf",0===o.notes.length),t.xp6(1),t.Q6J("formGroup",o.notesForm),t.xp6(6),t.Q6J("disabled",o.notesForm.invalid))},directives:[u.sg,u.O5,l._Y,l.JL,l.sg,i.Ie,i.Q$,i.g2,i.j9,l.JJ,l.u,i.YG,i.PM,i.FN],styles:[".notes-modal-content[_ngcontent-%COMP%]{display:contents}.notes-modal-content[_ngcontent-%COMP%]   .notes-content[_ngcontent-%COMP%]{overflow-y:auto}"]}),n})();const q=["slideWithNav2"];function C(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-card",20),t.TgZ(1,"ion-card-content"),t.TgZ(2,"h3"),t._uU(3,"Aun no se ha realizado esta estimacion"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"ion-button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().presentModal()}),t._uU(6," Estimar "),t.qZA(),t.qZA(),t.qZA()}}function b(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-card",20),t.TgZ(1,"ion-card-content"),t.TgZ(2,"h1"),t._uU(3," Presupuesto "),t.TgZ(4,"ion-chip",22),t.TgZ(5,"ion-label"),t.TgZ(6,"h1"),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"ion-button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().presentNotesModal()}),t._uU(10," Ver Notas "),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(7),t.hij("$ ",null==e.estimate?null:e.estimate.budget,"")}}function M(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-slide"),t.TgZ(1,"img",23),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().presentLightboxModal(c)}),t.qZA(),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(1),t.Q6J("src",e,t.LSH)}}const y=[{path:"",component:(()=>{class n{constructor(e,o,a){this.activatedRoute=e,this.modalController=o,this.estimationService=a,this.IMG_URL=h.N.IMG_URL+"/",this.slideOptsTwo={initialSlide:1,slidesPerView:2,loop:!0,centeredSlides:!0,spaceBetween:20},this.sliderTwo={isBeginningSlide:!0,isEndSlide:!1,slidesItems:[]}}ngOnInit(){this.estimationId=this.activatedRoute.snapshot.paramMap.get("id"),this.getEstimation()}slideNext(e,o){o.slideNext(500).then(()=>{this.checkIfNavDisabled(e,o)})}slidePrev(e,o){o.slidePrev(500).then(()=>{this.checkIfNavDisabled(e,o)})}SlideDidChange(e,o){this.checkIfNavDisabled(e,o)}checkIfNavDisabled(e,o){this.checkisBeginning(e,o),this.checkisEnd(e,o)}checkisBeginning(e,o){o.isBeginning().then(a=>{e.isBeginningSlide=a})}checkisEnd(e,o){o.isEnd().then(a=>{e.isEndSlide=a})}presentModal(){return(0,d.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:f,cssClass:"my-custom-class",componentProps:{estimationId:this.estimationId}});return e.onDidDismiss().then(o=>{console.log("data",o.data.status),"success"===o.data.status&&this.getEstimation()}),yield e.present()})}presentNotesModal(){return(0,d.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:A,componentProps:{estimationId:this.estimationId,notes:this.estimate.notes},cssClass:"my-custom-class"});return e.onDidDismiss().then(o=>{console.log("data",o.data.status),"success"===o.data.status&&this.getEstimation()}),yield e.present()})}presentLightboxModal(e){return(0,d.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:_,componentProps:{image:e},cssClass:"my-custom-class"})).present()})}getEstimation(){return this.estimationService.getById(this.estimationId).subscribe(e=>{console.log(e),this.estimate=e.data,console.log(e.data.images),this.sliderTwo.slidesItems=e.data.images.map(o=>this.IMG_URL+o)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.gz),t.Y36(i.IN),t.Y36(p.Q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-estimate-detail"]],viewQuery:function(e,o){if(1&e&&t.Gf(q,5),2&e){let a;t.iGM(a=t.CRH())&&(o.slideWithNav2=a.first)}},decls:53,vars:16,consts:[["fixed",""],["size","4"],[3,"src"],["size","8"],["size","6"],["size","12"],["target","_blank",3,"href"],["name","logo-whatsapp","color","success","size","large",1,"ion-margin-top"],["color","primary","mode","android"],["class","status-action-card",4,"ngIf"],["size","12",1,"ion-text-center","ion-margin-top","ion-margin-bottom"],["size","1"],[1,"slider-nav","arrow-prev",3,"click"],[1,"prev-icon-custom","custon-nav"],["size","10"],["pager","false",3,"options","ionSlideDidChange"],["slideWithNav2",""],[4,"ngFor","ngForOf"],[1,"slider-nav","arrow-next",3,"click"],[1,"next-icon-custom","custon-nav"],[1,"status-action-card"],["expand","block","shape","round",3,"click"],["color","success"],[3,"src","click"]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"ion-content"),t.TgZ(1,"ion-grid",0),t.TgZ(2,"ion-row"),t.TgZ(3,"ion-col",1),t.TgZ(4,"ion-card"),t.TgZ(5,"ion-card-content"),t._UZ(6,"img",2),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"ion-col",3),t.TgZ(8,"ion-row"),t.TgZ(9,"ion-col",4),t.TgZ(10,"ion-row"),t.TgZ(11,"ion-col",5),t.TgZ(12,"ion-card"),t.TgZ(13,"ion-card-content"),t.TgZ(14,"h1"),t._uU(15),t.qZA(),t.TgZ(16,"h3"),t._uU(17),t.qZA(),t.TgZ(18,"a",6),t._UZ(19,"ion-icon",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"ion-col",5),t.TgZ(21,"ion-card"),t.TgZ(22,"ion-card-content"),t.TgZ(23,"h3"),t.TgZ(24,"ion-chip",8),t.TgZ(25,"ion-label"),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"ion-chip",8),t.TgZ(28,"ion-label"),t._uU(29),t.qZA(),t.qZA(),t.TgZ(30,"ion-chip",8),t.TgZ(31,"ion-label"),t._uU(32),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"ion-col",4),t.YNc(34,C,7,0,"ion-card",9),t.YNc(35,b,11,1,"ion-card",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"ion-col",5),t.TgZ(37,"ion-card"),t.TgZ(38,"ion-card-content"),t._uU(39," Detalles sobre el estado del vehiculo Detalles sobre el estado del vehiculo Detalles sobre el estado del vehiculo Detalles sobre el estado del vehiculo "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"ion-col",10),t.TgZ(41,"h2"),t._uU(42,"Imagenes del vehiculo"),t.qZA(),t.qZA(),t.TgZ(43,"ion-col",11),t.TgZ(44,"span",12),t.NdJ("click",function(){t.CHM(a);const m=t.MAs(48);return o.slidePrev(o.sliderTwo,m)}),t._UZ(45,"div",13),t.qZA(),t.qZA(),t.TgZ(46,"ion-col",14),t.TgZ(47,"ion-slides",15,16),t.NdJ("ionSlideDidChange",function(){t.CHM(a);const m=t.MAs(48);return o.SlideDidChange(o.sliderTwo,m)}),t.YNc(49,M,2,1,"ion-slide",17),t.qZA(),t.qZA(),t.TgZ(50,"ion-col",11),t.TgZ(51,"span",18),t.NdJ("click",function(){t.CHM(a);const m=t.MAs(48);return o.slideNext(o.sliderTwo,m)}),t._UZ(52,"div",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(6),t.Q6J("src",o.IMG_URL+(null==o.estimate?null:o.estimate.images[0]),t.LSH),t.xp6(9),t.Oqu(null==o.estimate?null:o.estimate.name),t.xp6(2),t.AsE("",null==o.estimate?null:o.estimate.phone," | ",null==o.estimate?null:o.estimate.email,""),t.xp6(1),t.MGl("href","https://api.whatsapp.com/send?phone=1",null==o.estimate?null:o.estimate.phone,"",t.LSH),t.xp6(8),t.Oqu(null==o.estimate?null:o.estimate.make),t.xp6(3),t.Oqu(null==o.estimate?null:o.estimate.model),t.xp6(3),t.Oqu(null==o.estimate?null:o.estimate.year),t.xp6(2),t.Q6J("ngIf",!(null!=o.estimate&&o.estimate.status)),t.xp6(1),t.Q6J("ngIf",1==(null==o.estimate?null:o.estimate.status)),t.xp6(10),t.ekj("disabled",o.sliderTwo.isBeginningSlide),t.xp6(2),t.Q6J("options",o.slideOptsTwo),t.xp6(2),t.Q6J("ngForOf",o.sliderTwo.slidesItems),t.xp6(3),t.ekj("disabled",o.sliderTwo.isEndSlide))},directives:[i.W2,i.jY,i.Nd,i.wI,i.PM,i.FN,i.gu,i.hM,i.Q$,u.O5,i.Hr,u.sg,i.YG,i.A$],styles:[".custon-nav[_ngcontent-%COMP%]{height:48px;width:20px;cursor:pointer;vertical-align:middle;position:absolute;top:50%;transform:translateY(-50%)}.prev-icon-custom[_ngcontent-%COMP%]{background:url(https://freakyjolly.com/demo/jquery/OwlCarousel2/nav-icon.png) no-repeat scroll 0px 0px}.prev-icon-custom.disabled[_ngcontent-%COMP%]{opacity:.4;cursor:default}.next-icon-custom[_ngcontent-%COMP%]{background:url(https://freakyjolly.com/demo/jquery/OwlCarousel2/nav-icon.png) no-repeat scroll -32px 0px}.next-icon-custom.disabled[_ngcontent-%COMP%]{opacity:.4;cursor:default}.slider-nav[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:100%}.slide-text[_ngcontent-%COMP%]{position:absolute;color:#fff;bottom:30px}.status-action-card[_ngcontent-%COMP%]{height:90%;display:flex;flex-direction:row;flex-wrap:nowrap;align-content:center;justify-content:center;align-items:center}"]}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(y)],g.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,l.u5,l.UX,i.Pc,E]]}),n})()}}]);